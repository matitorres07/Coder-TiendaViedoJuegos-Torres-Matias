{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Mati/Desktop/REACT/tiendavideojuegos-torres/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Mati/Desktop/REACT/tiendavideojuegos-torres/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Mati\\\\Desktop\\\\REACT\\\\tiendavideojuegos-torres\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{useCartContext}from\"./context/CartContext.jsx\";import NavBar from\"./NavBar.js\";import{addDoc,collection,getFirestore}from\"firebase/firestore\";import'./styles/carrito.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Cart=function Cart(){var _useCartContext=useCartContext(),cart=_useCartContext.cart;var _useCartContext2=useCartContext(),deleteFromCart=_useCartContext2.deleteFromCart;var _useCartContext3=useCartContext(),deleteCart=_useCartContext3.deleteCart;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),contrador2=_useState2[0],setcontrador2=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),names=_useState4[0],setNames=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),numero=_useState6[0],setNumero=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),idCompra=_useState10[0],setidCompra=_useState10[1];var totalCompra=cart.reduce(function(sum,i){return sum+=i.quantity*i.price;},0);var handleNameChange=function handleNameChange(e){setNames(e.target.value);};var handleNumeroChange=function handleNumeroChange(e){setNumero(e.target.value);};var handleEmailChange=function handleEmailChange(e){setEmail(e.target.value);};var today=new Date();var dd=String(today.getDate()).padStart(2,'0');var mm=String(today.getMonth()+1).padStart(2,'0');//January is 0!\nvar yyyy=today.getFullYear();var hoy=dd+'/'+mm+'/'+yyyy;//Guardar la orden en firebase\nvar saveOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var usr,orderToSave,db,orderCollection,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:usr={name:names,phone:numero,emial:email};orderToSave={user:usr,order:cart,date:hoy,total:totalCompra};console.log(\"esta es la orden\",orderToSave);db=getFirestore();orderCollection=collection(db,'orders');_context.next=7;return addDoc(orderCollection,orderToSave);case 7:response=_context.sent;console.log(\"respuesta\",response);console.log(\"respuesta id\",response.id);setidCompra(response.id);case 11:case\"end\":return _context.stop();}}},_callee);}));return function saveOrder(){return _ref.apply(this,arguments);};}();useEffect(function(){setcontrador2(cart.reduce(function(a,v){return a=a+v.quantity;},0));},[{contrador2:contrador2}]);console.log(contrador2);var borrarDelCarrito=function borrarDelCarrito(id){var findProduct=cart.find(function(producto){return producto.id===id;});console.log('Este es el producto a borrar',id);if(!1){alert(\"Error aca!\");return;}deleteFromCart(id);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:cart.length?/*#__PURE__*/_jsx(\"div\",{className:\" bg-gray-100\",style:{backgroundImage:\"url(\\\"https://c4.wallpaperflare.com/wallpaper/300/544/973/discord-wallpaper-thumb.jpg\\\")\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto mt-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cardcarrito2 flex shadow-md my-10 \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"divacamb bg-white px-10 py-10 cart-div\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-b pb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-semibold text-2xl\",style:{color:'white'},children:\"Carrito de compras\"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-secondary\",onClick:function onClick(){return deleteCart();},children:\"Vaciar carrito\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mt-10 mb-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-600 text-xs uppercase w-2/5\",style:{color:'white'},children:\"Detalle del producto\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\",style:{color:'white'},children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\",style:{color:'white'},children:\"Precio\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\",style:{color:'white'},children:\"Total\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(_Fragment,{children:cart.map(function(_ref2){var id=_ref2.id,quantity=_ref2.quantity,name=_ref2.name,price=_ref2.price,thumbnail=_ref2.thumbnail;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center hover:bg-gray-300 -mx-8 px-6 py-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-2/5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20\",children:/*#__PURE__*/_jsx(\"img\",{className:\"h-24\",src:thumbnail,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-between ml-4 flex-grow\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-sm\",style:{color:'white'},children:name}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-xs btn-error \",onClick:function onClick(){return borrarDelCarrito(id);},children:\"Eliminar\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center w-1/5\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-sm\",style:{color:'white'},children:quantity})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-center w-1/5 font-semibold text-sm\",style:{color:'white'},children:price}),/*#__PURE__*/_jsx(\"span\",{className:\"text-center w-1/5 font-semibold text-sm\",style:{color:'white'},children:quantity*price})]});})})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"summary\",className:\"divacamb2 px-8 py-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-semibold text-2xl border-b pb-8\",style:{color:'white'},children:\"Resumen de la orden!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-10 mb-5 flex-col ...\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-sm uppercase\",style:{color:'white'},children:[\"Items en el carrito : \",contrador2]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-sm uppercase\",style:{color:'white',marginTop:'16px'},children:\"Ingresa tus datos\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"promo\",placeholder:\"Nombre completo\",className:\"p-2 text-sm w-full\",onChange:handleNameChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"promo\",placeholder:\"Numero de contacto\",className:\"p-2 text-sm w-full\",onChange:handleNumeroChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"promo\",placeholder:\"email\",className:\"p-2 text-sm w-full\",onChange:handleEmailChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-10\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"promo\",className:\"font-semibold inline-block mb-3 text-sm uppercase\",style:{color:'white'},children:\"Codigo de descuento\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"promo\",placeholder:\"Ingresa El codigo\",className:\"p-2 text-sm w-full\"})]}),/*#__PURE__*/_jsx(\"label\",{for:\"my-modal\",className:\"btn modal-button\",style:{color:'white'},children:\"Aplicar Codigo!\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"my-modal\",class:\"modal-toggle\"}),/*#__PURE__*/_jsx(\"div\",{class:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"modal-box\",children:[/*#__PURE__*/_jsx(\"h3\",{class:\"font-bold text-lg\",children:\"Aca hubo un malentendido...\"}),/*#__PURE__*/_jsx(\"p\",{class:\"py-4\",children:\"Este codigo no sirve o aun no implementamos codigos para descuentos aun :(\"}),/*#__PURE__*/_jsx(\"div\",{class:\"modal-action\",children:/*#__PURE__*/_jsx(\"label\",{for:\"my-modal\",class:\"btn\",children:\"Aceptar\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t mt-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex font-semibold justify-between py-6 text-sm uppercase\",children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'white'},children:\"Total :\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'white'},children:[\"$\",cart.reduce(function(sum,i){return sum+=i.quantity*i.price;},0)]})]}),/*#__PURE__*/_jsx(\"label\",{for:\"my-modal1\",class:\"btn modal-button focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800\",onClick:saveOrder,children:\"Finalizar compra\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"my-modal1\",class:\"modal-toggle\"}),/*#__PURE__*/_jsx(\"div\",{class:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"modal-box\",children:[/*#__PURE__*/_jsxs(\"h3\",{class:\"font-bold text-lg\",children:[\"Felicitaciones \",/*#__PURE__*/_jsx(\"strong\",{children:names}),\" tu compra se realizado con exito!\"]}),/*#__PURE__*/_jsxs(\"p\",{class:\"py-4\",children:[\"Fecha de la compra : \",hoy]}),/*#__PURE__*/_jsxs(\"p\",{class:\"py-4\",children:[\"Juegos comprados : \",contrador2]}),/*#__PURE__*/_jsxs(\"p\",{class:\"py-4\",children:[\"Total de la compra : \",totalCompra]}),/*#__PURE__*/_jsxs(\"p\",{class:\"py-4\",children:[\"Codigo de compra : \",idCompra]}),/*#__PURE__*/_jsx(\"h1\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Te enviamos un correo con los detalles de tu compra a la direccion \",email,\", gracias por elegirnos!\"]})}),/*#__PURE__*/_jsx(\"div\",{class:\"modal-action\",children:/*#__PURE__*/_jsx(Link,{to:'/juegos',children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"focus:outline-none text-white bg-purple-700 hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 font-medium rounded-lg text-sm px-5 py-2.5 mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900\",onClick:function onClick(){return deleteCart();},children:\"Seguir navegando!\"})})})]})})]})]})]})})}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col ...\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"divcarrito\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Tu carrito esta vacio!\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col ... items-center ... justify-center ...\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"\",src:\"https://cdni.iconscout.com/illustration/free/thumb/empty-cart-4085814-3385483.png\"}),/*#__PURE__*/_jsx(Link,{to:'/',children:/*#__PURE__*/_jsx(\"a\",{class:\"link\",style:{color:'#A096FE',fontSize:'25px'},children:\"Empezar a comprar!\"})})]})]})})]});};export default Cart;","map":{"version":3,"sources":["C:/Users/Mati/Desktop/REACT/tiendavideojuegos-torres/src/components/Cart.js"],"names":["useEffect","useState","Link","useCartContext","NavBar","addDoc","collection","getFirestore","Cart","cart","deleteFromCart","deleteCart","contrador2","setcontrador2","names","setNames","numero","setNumero","email","setEmail","idCompra","setidCompra","totalCompra","reduce","sum","i","quantity","price","handleNameChange","e","target","value","handleNumeroChange","handleEmailChange","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","hoy","saveOrder","usr","name","phone","emial","orderToSave","user","order","date","total","console","log","db","orderCollection","response","id","a","v","borrarDelCarrito","findProduct","find","producto","alert","length","backgroundImage","color","map","thumbnail","marginTop","fontSize"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useCartContext } from \"./context/CartContext.jsx\";\r\nimport NavBar from \"./NavBar.js\";\r\nimport { addDoc, collection, getFirestore } from \"firebase/firestore\"\r\n\r\n\r\nimport './styles/carrito.css';\r\n\r\nconst Cart = () => {\r\n  const {cart} = useCartContext()\r\n  const {deleteFromCart} = useCartContext()\r\n  const {deleteCart} = useCartContext()\r\n  const [contrador2, setcontrador2] = useState(0)\r\n\r\n  const [names, setNames] = useState(\"\");\r\n  const [numero, setNumero] = useState(\"\")\r\n  const [email, setEmail] = useState(\"\");\r\n  const [idCompra, setidCompra] = useState('')\r\n\r\n  const totalCompra = cart.reduce((sum, i) => (\r\n    sum += i.quantity * i.price\r\n    ), 0)\r\n  \r\n\r\n  const handleNameChange = (e) => {\r\n    setNames(e.target.value);\r\n  };\r\n  const handleNumeroChange = (e) => {\r\n    setNumero(e.target.value);\r\n  };\r\n\r\n  const handleEmailChange = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n\r\n  var today = new Date();\r\n    var dd = String(today.getDate()).padStart(2, '0');\r\n    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n    var yyyy = today.getFullYear();\r\n    const hoy =   dd + '/' + mm + '/' + yyyy\r\n\r\n  \r\n  //Guardar la orden en firebase\r\n\r\n  const saveOrder = async () => { \r\n    const usr = {\r\n      name : names,\r\n      phone : numero,\r\n      emial : email,\r\n    }\r\n\r\n    const orderToSave = {\r\n      user: usr,\r\n\r\n      order: cart,\r\n\r\n      date : hoy,\r\n\r\n      total: totalCompra\r\n\r\n    }\r\n\r\n    console.log(\"esta es la orden\",orderToSave);\r\n\r\n    const db = getFirestore()\r\n    const orderCollection = collection(db,'orders')\r\n\r\n    const response = await addDoc (orderCollection,orderToSave)\r\n    console.log(\"respuesta\",response);\r\n    console.log(\"respuesta id\",response.id);\r\n    setidCompra(response.id)\r\n   }\r\n   \r\n\r\n\r\n  useEffect(() => {\r\n    setcontrador2 (cart.reduce((a,v) =>  a = a + v.quantity , 0 ))\r\n  }, [{contrador2}]); \r\n  console.log(contrador2);\r\n\r\n\r\n  const borrarDelCarrito = (id) => {\r\n\t\tconst findProduct = cart.find((producto) => producto.id === id)\r\n    console.log('Este es el producto a borrar',id);\r\n\t\tif (!1) {\r\n\t\t\talert(\"Error aca!\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tdeleteFromCart(id)\r\n\r\n\t}\r\n\r\n  return (\r\n    <div>\r\n      <NavBar></NavBar>\r\n      <div className=\"\">\r\n      {\r\n        \r\n        cart.length ? (\r\n      \r\n      <div className=\" bg-gray-100\" style={{backgroundImage: `url(\"https://c4.wallpaperflare.com/wallpaper/300/544/973/discord-wallpaper-thumb.jpg\")`}}>\r\n        <div className=\"container mx-auto mt-10\">\r\n          <div className=\"cardcarrito2 flex shadow-md my-10 \">\r\n            <div className=\"divacamb bg-white px-10 py-10 cart-div\">\r\n              <div className=\"flex justify-between border-b pb-8\">\r\n                <h1 className=\"font-semibold text-2xl\" style={{color : 'white'}}>Carrito de compras</h1>\r\n                <button class=\"btn btn-secondary\" onClick={() => deleteCart()}>Vaciar carrito</button>\r\n              </div>\r\n              <div className=\"flex mt-10 mb-5\">\r\n                <h3 className=\"font-semibold text-gray-600 text-xs uppercase w-2/5\" style={{color : 'white'}}>Detalle del producto</h3>\r\n                <h3 className=\"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\" style={{color : 'white'}}>Cantidad</h3>\r\n                <h3 className=\"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\" style={{color : 'white'}}>Precio</h3>\r\n                <h3 className=\"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\" style={{color : 'white'}}>Total</h3>\r\n              </div>\r\n            <div>\r\n              \r\n            <>\r\n            {cart.map(({id, quantity, name,price,thumbnail }) => (\r\n              <div className=\"flex items-center hover:bg-gray-300 -mx-8 px-6 py-5\">\r\n              <div className=\"flex w-2/5\"> \r\n                <div className=\"w-20\">\r\n                  <img className=\"h-24\" src={thumbnail} alt=\"\"/>\r\n                </div>\r\n                <div className=\"flex flex-col justify-between ml-4 flex-grow\">\r\n                  <span className=\"font-bold text-sm\" style={{color : 'white'}}>{name}</span>\r\n      \r\n                  <button class=\"btn btn-xs btn-error \" onClick={() => borrarDelCarrito(id)}>Eliminar</button>\r\n                  \r\n                </div>\r\n              </div>\r\n              <div className=\"flex justify-center w-1/5\">\r\n              <span className=\"font-bold text-sm\" style={{color : 'white'}}>{quantity}</span>\r\n              </div>\r\n              <span className=\"text-center w-1/5 font-semibold text-sm\" style={{color : 'white'}}>{price}</span>\r\n              <span className=\"text-center w-1/5 font-semibold text-sm\" style={{color : 'white'}}>{ quantity * price\r\n          }</span>\r\n            </div>\r\n            ))}\r\n          </>\r\n          </div>\r\n        \r\n      \r\n            \r\n      \r\n            </div>\r\n\r\n            \r\n            {/* \r\n           \r\n            */}\r\n             <div id=\"summary\" className=\"divacamb2 px-8 py-10\">\r\n              <h1 className=\"font-semibold text-2xl border-b pb-8\" style={{color : 'white'}}>Resumen de la orden!</h1>\r\n              <div className=\"flex justify-between mt-10 mb-5 flex-col ...\">\r\n                <span className=\"font-semibold text-sm uppercase\" style={{color : 'white'}}>Items en el carrito : {contrador2}</span>\r\n                <span className=\"font-semibold text-sm uppercase\" style={{color : 'white',marginTop : '16px'}}>Ingresa tus datos</span>\r\n                \r\n                <input type=\"text\" id=\"promo\" placeholder=\"Nombre completo\" className=\"p-2 text-sm w-full\" onChange={handleNameChange} />\r\n                <br></br>\r\n                <input type=\"text\" id=\"promo\" placeholder=\"Numero de contacto\" className=\"p-2 text-sm w-full\" onChange={handleNumeroChange}/>\r\n                <br></br>\r\n                <input type=\"email\" id=\"promo\" placeholder=\"email\" className=\"p-2 text-sm w-full\" onChange={handleEmailChange}/>\r\n                \r\n              </div>\r\n              \r\n              <div className=\"py-10\">\r\n                <label htmlFor=\"promo\" className=\"font-semibold inline-block mb-3 text-sm uppercase\" style={{color : 'white'}}>Codigo de descuento</label>\r\n                <input type=\"text\" id=\"promo\" placeholder=\"Ingresa El codigo\" className=\"p-2 text-sm w-full\"/>\r\n              </div>\r\n              \r\n                  <label for=\"my-modal\" className=\"btn modal-button\" style={{color : 'white'}}>Aplicar Codigo!</label>\r\n      \r\n      \r\n                  <input type=\"checkbox\" id=\"my-modal\" class=\"modal-toggle\" />\r\n                  <div class=\"modal\">\r\n                    <div class=\"modal-box\">\r\n                      <h3 class=\"font-bold text-lg\">Aca hubo un malentendido...</h3>\r\n                      <p class=\"py-4\">Este codigo no sirve o aun no implementamos codigos para descuentos aun :(</p>\r\n                      <div class=\"modal-action\">\r\n                        <label for=\"my-modal\" class=\"btn\">Aceptar</label>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n              <div className=\"border-t mt-8\">\r\n                <div className=\"flex font-semibold justify-between py-6 text-sm uppercase\">\r\n                  <span style={{color : 'white'}}>Total :</span>\r\n                  <span style={{color : 'white'}}>${cart.reduce((sum, i) => (\r\n              sum += i.quantity * i.price\r\n          ), 0)}</span>\r\n                </div>\r\n                \r\n                \r\n                  <label for=\"my-modal1\" class=\"btn modal-button focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800\" onClick={saveOrder}>Finalizar compra</label>\r\n\r\n\r\n                        <input type=\"checkbox\" id=\"my-modal1\" class=\"modal-toggle\" />\r\n                        <div class=\"modal\">\r\n                          <div class=\"modal-box\">\r\n                            <h3 class=\"font-bold text-lg\">Felicitaciones <strong>{names}</strong> tu compra se realizado con exito!</h3>\r\n                            <p class=\"py-4\">Fecha de la compra : {hoy}</p>\r\n                            <p class=\"py-4\">Juegos comprados : {contrador2}</p>\r\n                            <p class=\"py-4\">Total de la compra : {totalCompra}</p>\r\n                            <p class=\"py-4\">Codigo de compra : {idCompra}</p>\r\n                            <h1><strong>Te enviamos un correo con los detalles de tu compra a la direccion {email}, gracias por elegirnos!</strong></h1>\r\n                            <div class=\"modal-action\">\r\n                            <Link to={'/juegos'}><button type=\"button\" class=\"focus:outline-none text-white bg-purple-700 hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 font-medium rounded-lg text-sm px-5 py-2.5 mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900\" onClick={() => deleteCart()}>Seguir navegando!</button></Link>\r\n\r\n                    \r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n              </div>\r\n            </div>\r\n            \r\n      \r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n                      \r\n      \r\n      \r\n        ) : (\r\n          <div className=\"flex flex-col ...\">\r\n              <div className=\"divcarrito\">\r\n                <h1>Tu carrito esta vacio!</h1>\r\n              </div>\r\n              <div className=\"flex flex-col ... items-center ... justify-center ...\">\r\n              <img className=''  src=\"https://cdni.iconscout.com/illustration/free/thumb/empty-cart-4085814-3385483.png\" />\r\n              \r\n              \r\n              \r\n              <Link to={'/'}><a class=\"link\" style={{color : '#A096FE',fontSize: '25px'}}>Empezar a comprar!</a></Link>\r\n              </div>\r\n              \r\n              </div>\r\n        ) \r\n      }\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Cart"]},"metadata":{},"sourceType":"module"}